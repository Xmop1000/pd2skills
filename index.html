<!DOCTYPE html>
<html lang="zh-TW">
	<head>
		<title> Angular Test </title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=0">
		
		<link rel="stylesheet" href="style.css">
		
		<script src="angular.min.js"></script>
		
	</head>
	
	<body ng-app="myApp" ng-controller="MainCtrl">
		
		<div class="main" >
			
			<ul class="left trees">
				
				<li class="tree">
					
					<div class="tree-tab"></div>
					
					<ul	ng-repeat="tier in skillTree | orderBy:'-tier'">
					
						<li	
							class="skill"
							ng-repeat="skill in tier.skills track by $index"
							ng-mouseover="skillHover(skill, tier)"
							ng-mouseleave="skillLeave(skill, tier)"
							ng-click="skillClick(skill, tier)"
							ng-class="{
								unlock : tier.unlockStatus,
								basic  : skill.ownBasic,
								ace    : skill.ownAce,
								alert  : skill.alert
							}"
						>
							<a
								class="skill-remove"
								ng-show="skill.ownBasic || skill.ownAce"
								ng-click="skillRemove(skill, tier); $event.stopPropagation()"
							>
								<span class="skill-remove-icon">x</span>
							</a>
							<div class="skill-icon"></div>
							<div class="skill-text" ng-switch="skillUpdate(skill, tier)">
								<span ng-switch-when="locked">未解鎖</span>
								<span ng-switch-when="basic">擁有</span>
								<span ng-switch-when="ace">王牌</span>
								<span ng-switch-when="basic-hover">購買 基本<br>花費 {{ tier.skillUnlockPoint.basic }} 點</span>
								<span ng-switch-when="ace-hover">購買 王牌<br>花費 {{ tier.skillUnlockPoint.ace }} 點</span>
							</div>	
							
						</li>
						
					</ul>
					
				<div> {{updateTreeStatus(skillTree)}} </div>
				
			</ul>
			
			<div class="right">
			
				<div class="info-title">
					<h1 class="title1">{{ display.skill.title }}</h1>
					<h2 class="title2">{{ display.skill.name }}</h2>
				</div>
				
				<div class="info-block alert">
					<p ng-show="display.tier.unlockStatus === false">
						你必須再花費 {{ display.tier.tierUnlockRequire }} 點來解鎖第 {{ display.tier.tier }} 階技能
					</p>
					<p ng-show="display.skill.unlockRequire === false">
						必須要擁有前置技能 : {{ display.skill.require.skill.title }} ({{ display.skill.require.skill.name }})
					</p>
				</div>
				
				<div class="info-block" ng-show="display.tier.skillUnlockPoint.basic">
					<p>
						<span>基本: </span>
						
						<span
							class="info-strong"
							ng-class="{lock : display.skill.unlockBasic === false}"
							ng-hide="display.skill.ownBasic"
						>
							{{ display.tier.skillUnlockPoint.basic }} 點 / ${{ display.tier.skillUnlockCost.basic | number}}
						</span>
						
						<span class="info-strong" ng-show="display.skill.ownBasic">擁有</span>
					</p>
					<p ng-bind-html="display.skill.basic | htmlSafe"></p>
				</div>
				
				<div class="info-block" ng-show="display.tier.skillUnlockPoint.ace">
					<p>
						<span>王牌: </span>
						
						<span
							class="info-strong"
							ng-class="{lock : ! display.skill.unlockAce}"
							ng-hide="display.skill.ownAce"
						>
							{{ display.tier.skillUnlockPoint.ace }} 點 / ${{ display.tier.skillUnlockCost.ace | number}}
						</span>
						
						<span class="info-strong" ng-show="display.skill.ownAce">擁有</span>
					</p>
					<p ng-bind-html="display.skill.ace | htmlSafe"></p>
				</div>
				
				<div class="info-block" ng-bind-html="display.skill.text | htmlSafe"></div>
			
			</div>
			
		</div>
		<p> 剩餘點數: {{ getUsed(); }} </p>
		
		<script src="test.js"></script>
	</body>
</html>